{% extends "base_central.html" %}

{% load i18n %}

{% block title %}{% trans "Installation" %}{% endblock %}

{% block install_active %}active{% endblock install_active %}

{% block headcss %}
<style>
label {
    width: 59px;
    display: block;
    float: left;
    text-align: right;
    padding-right: 10px;
    font-weight: bold;
}
input {
	margin-bottom: 15px;
}
.submit {
    margin-left: 71px;
}
</style>
{% endblock headcss %}

{% block content %}

        <div class="selection">
            <div class="subtitle">{% trans "Select Organization" %}</div><select id="organization">
            <option {% if not request.GET.organization %}selected{% endif %}>----</option>
                {% for org in organizations %}
                    <option value="{{ org.id }}" {% if request.GET.organization == org.id %}selected{% endif %}>{{ org }} : {{org.id}}</option>
                {% endfor %}
            </select>
        </div>

        <div class="selection">
            <div class="subtitle">{% trans "Select Zone" %}</div><select id="zone">
                <option {% if not request.GET.zone %}selected{% endif %}>----</option>
                {% for zone in zones %}
                    <option value="{{ zone.id }}"{% if request.GET.zone == zone.id %}selected{% endif %}>{{ zone }}</option>
                {% endfor %}
            </select>
        </div>


        <div class="selection">
            <div class="subtitle">{% trans "Select # Certificates" %}</div><select id="num_certificates">
                <option {% if not request.GET.num_certificates %}selected{% endif %}>1</option>
                {% for n in sequence %}
                    <option value="{{ n }}"{% if request.GET.num_certificates == n %}selected{% endif %}>{{ n }}</option>
                {% endfor %}
            </select>
        </div>
<script>

function setGetParam(name, val) {
    var vars = {};
    var parts = window.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m, key, value) {
        vars[key] = value;
    });
    if (val != "" && val != "----") {
        vars[name] = val;
    } else {
        delete vars[name];
    }
    url = "?" + $.param(vars);
    window.location.href = url;    
}

$(function() {

    $("#organization").change(function(){
       setGetParam("organization", $("#organization option:selected").val()); 
    });
    
    $("#zone").change(function(){
       setGetParam("zone", $("#zone option:selected").val()); 
    });
    
    $("#num_certificates").change(function(){
       setGetParam("num_certificates", $("#num_certificates option:selected").val()); 
    });
    
});
</script>
{% endblock %}
